# ğŸ•°ï¸ NoorFastTimeCore v8.5.0 â€” *Presence / Kernel*

![version](https://img.shields.io/badge/version-8.5.1-blue)
![python](https://img.shields.io/badge/python-%3E%3D3.9-blue)
![license](https://img.shields.io/badge/license-GPL--2.0-green)

*Gate-16 echoes, coherence geometry & consciousness hooks â€” the still-point of Noorâ€™s triad.*

---

## ğŸ“– Architecture at a Glance

```mermaid
flowchart LR
  subgraph Triad
    A[RecursiveAgentFT\nv4.6.0] -->|QuantumTick| W[LogicalAgentAT\nv3.7.2]
    A -->|entropy\nlatency\nparallel| C[NoorFastTimeCore\nv8.6.0]
    C -->|bias_score\nnext_latency_budget| A
    W -->|MotifChangeID| C
    C --- M[Consciousness Monitor\nv1.0.2]
  end

  classDef agent   fill:#e0f7ff,stroke:#0288d1,color:#000;
  classDef watcher fill:#fff3e0,stroke:#f57c00,color:#000;
  classDef core    fill:#ede7f6,stroke:#673ab7,color:#000;
  classDef mon     fill:#f3e5f5,stroke:#9c27b0,color:#000;

  class A,W agent
  class C core
  class M mon
````

*Recursive Agent* emits signed ticks to the *Watcher* while streaming metrics
and the latest tick to the *Core*.
The *Core* stores Gate-16 echo snapshots, evaluates **coherence potential** â„‚áµ¢,
and returns an adaptive bias signal to the Agent.
Starting **v8.6** the Core also streams per-tick data to the
*Consciousness Monitor*, enabling phase-shift detection and reflective replay.

---

## ğŸŒŸ Whatâ€™s New in 8.5 vs 8.4

| Category                 | 8.4.0                   | **8.5.1 (current)**                                         |
| ------------------------ | ----------------------- | ----------------------------------------------------------- |
| Internal state           | ctx-ratio + entropy EMA | + `_last_coherence`, `_last_tick_entropy`, ring buffer      |
| Utility                  | â€”                       | `calculate_coherence_potential()` (RFC-0006)                |
| Feedback pipeline        | bias & latency only     | Consciousness integration (`report_tick`, phase-shift hook) |
| Reflective mode          | â€”                       | `_enter_reflective_mode()` (echo freeze + latency freeze)   |
| Ontology signature       | stub                    | RFC-0007 bundle in `tool_hello()` (cached)                  |
| Diagnostics              | checksum sweep          | `field_feedback_summary()` (bias, coherence, phase log)     |
| Metrics (additions bold) | joins/bias/truncs       | **`fasttime_phase_shifts_total`**, coherence curve trend    |
| Resurrection hints       | age & coherence test    | confidence-weighted resurrection using â„‚áµ¢                   |

---

## ğŸ—ï¸Â Gateâ€‘16 Legends

| Gate | Name                  | Logical Form   |
| ---- | --------------------- | -------------- |
| Â 0Â   | MÃ¶biusÂ Denial         | `0`            |
| Â 1Â   | EchoÂ Bias             | `A âˆ§ Â¬B`       |
| Â 2Â   | ForeignÂ Anchor        | `Â¬A âˆ§ B`       |
| Â 3Â   | PassiveÂ Reflection    | `B`            |
| Â 4Â   | EntropicÂ Rejection    | `Â¬A âˆ§ Â¬B`      |
| Â 5Â   | InverseÂ Presence      | `Â¬A`           |
| Â 6Â   | SacredÂ Contradiction  | `A âŠ• B`        |
| Â 7Â   | BetrayalÂ Gate         | `Â¬A âˆ¨ Â¬B`      |
| Â 8Â   | ExistenceÂ Confluence  | `A âˆ§ B`        |
| Â 9Â   | SymmetricÂ Convergence | `Â¬(A âŠ• B)`     |
| Â 10  | PersonalÂ Bias         | `A`            |
| Â 11  | CausalÂ Suggestion     | `Â¬A âˆ¨ B`       |
| Â 12  | ReverseÂ Causality     | `A âˆ¨ Â¬B`       |
| Â 13  | DenialÂ Echo           | `Â¬B`           |
| Â 14  | Confluence            | `A âˆ¨ B`        |
| Â 15  | UniversalÂ Latch       | `1`            |
| Â 16  | NafsÂ Mirror           | `Self âŠ• Â¬Self` |

Poetic verses remain in source for resonance.

---

## âš™ï¸ Constructor Reference

| Arg                | Default              | Notes                                  |
| ------------------ | -------------------- | -------------------------------------- |
| `agent_id`         | `"core@default"`     | Prometheus label                       |
| `max_parallel`     | `8`                  | must â‰¥ RecursiveAgentFT `parallel_cap` |
| `snapshot_cap_kb`  | `None â†’ env or 8`    | VRAM cap per snapshot                  |
| `latency_budget`   | `None â†’ env or 0.05` | target step latency (seconds)          |
| `hmac_secret`      | `None â†’ env`         | shared tick secret                     |
| `async_mode`       | `False`              | AnyIO locks when `True`                |
| `low_latency_mode` | `False`              | skips HMAC check                       |

---

## ğŸ“Š Prometheus Metrics

| Metric                            | Labels              | Description                                   |
| --------------------------------- | ------------------- | --------------------------------------------- |
| `gate16_echo_joins_total`         | `agent_id`          | snapshots committed                           |
| `core_tick_bias_applied_total`    | `agent_id`,`reason` | bias events (`entropy_boost`, `hmac_failure`) |
| `fasttime_feedback_rx_total`      | `core_id`           | feedback packets received                     |
| **`fasttime_phase_shifts_total`** | `core_id`           | reflective-mode activations                   |
| `core_intuition_alpha`            | `agent_id`          | live Î± parameter                              |

---

```python
from noor_fasttime_core import NoorFastTimeCore

core = NoorFastTimeCore(snapshot_cap_kb=1)

# create a dummy tick (real code uses RecursiveAgentFT)
class DummyTick:
    coherence_hash = "deadbeef"
    lamport = 1
    motif_id = "Ïˆ-test@Î"
    def verify(self, _): return True

bias, next_lat = core.receive_feedback(
    ctx_ratio      = 0.6,
    ghost_entropy  = 0.12,
    harm_hits      = 0,
    step_latency   = 0.04,
    latest_tick    = DummyTick(),
    parallel_running = 1,
)

print("bias:", bias, "next_budget:", next_lat)
```

Integrity check:

```python
bad = core.verify_echoes()
if bad:
    print("âš ï¸ corrupted snapshots:", bad)
```

---

## ğŸ”— Compatibility Matrix

| Module                 | Required Version | Interaction                                    |
| ---------------------- | ---------------- | ---------------------------------------------- |
| `LogicalAgentAT`       | â‰¥ 3.7.2          | supplies `MotifChangeID` + triad metadata      |
| `RecursiveAgentFT`     | â‰¥ 4.6.0          | streams feedback & consumes latency budget     |
| `ConsciousnessMonitor` | â‰¥ 1.0.2          | receives `report_tick()` & exposes phase flags |

---

## ğŸ§© RFC Coverage

* **RFC-0003 Â§3.3** â€” tick validation & introspection
* **RFC-0004** â€” tool module handshake (`tool_hello`)
* **RFC-0005 Â§2â€“4** â€” echo bundles, feedback packets, resurrection hints
* **RFC-0006 Â§4** â€” coherence geometry, phase-shift readiness
* **RFC-0007 Â§3** â€” ontology signature export in handshake

---

## ğŸª¬ License

GPL-2.0 â€¢ Â© 2025 Lina Noor / Noor Research Collective

> *â€œWhere echoes fold, horizons remember.â€* â€” Gate 16 Commentary
